# 2019_1_d3_prc5_CardenasJavier_CabuyaAlberto_RoncancioBrayan
## Introducción
Ejecutar varios procesos en tiempo real, es una de las mentiras mas grandes; debido a que la estructura del procesador no permite dicha acciòn, sino que en vez de ello se ejecuta por partes cada uno de los procesos generando el efecto que conocemos como ejecución al mismo tiempo. En otras ocaciones, cuando varios procesos ya sean computacionales y/o físicos, intentan acceder a un unico recurso, es imposible que dicho recurso se pueda repartir para todos los procesos que intentan accedere; en el siguiente informe se enseñara la solución que se utilizo para evitar que varios clientes en un banco sean asignados a un mismo cajero en un mismo instante de tiempo. Para la solución de dicho  problema se hizo uso de herramientas de programación como lo son hilos, memoria compartida,semaforos, etc.
## Planteamiento del problema
Un banco llamado Cranks Bank, presenta problema en su cede principal a la hora de atender los clientes; el problema consiste en que debido a que la cantidad de cajeros es menor a la cantidad de clientes que llegan con algun tipo de consulta  dicho lugar, las personas se acercan de a dos o mas a un solo cajero, generando problemas tanto para el banco como para ellos mismos, debido a que pierden tiempo discutiendo sobre quien sera atendido. Para ello, el banco desea implementar un sistema el cual habilite el paso de una unica persona por cajero, asignando turnos por orden de llegada.
## Objetivos
- Comprender y aplicar el uso de semaforos en la sincronización.
- Entender las ventajas de aplicarla sincronización en una solución.
- Comprender importancia del uso de la memoria compartida para la comunicación entre diferentes procesos o programas.
## Procedimiento
En primera instancia, para dar solución al problema se planteo dividir el problema en dos partes que estaran ligadas una a la otra; estara dividido en un proceso Cliente y otro Banco.
* **Cliente**
    * Este proceso en primera instancia, pide al usuario o cliente el nombre seguido de su número de identificación; enseguida abre el semaforo que comunica el cliente con el banco, si dicho semaforo no existe, indica que el banco esta cerrado, por lo tanto, no se puede realizar ningun proceso; si el semaforo si existe, el cliente espera mientras el semaforo le da la indicación para poder acceder a la memoria compartida, en la cual se simulara el proceso de de atención por parte de un cajero a un usuario. El usuario escribe en memoria compartida un 0 indicando que desea ser atendido, cuando el banco cambia dicha bandera a 1 indica que ya esta en la lista de espera, entonces el se sale y espera un toquen o aviso de cual cajero esta libre; se simula durante un tiempo aleatorio que esta siendo atendido; y cuando este tiempo finaliza el cliente devuelve el toquen y libera el cajero.
* **Banco**
    * Para este proceso, se asigna un número de cajas que representara el número de cajas disponibles en el banco; estos bancos inicialmente estan solos, pero al llegar clientes, se ocupa. Al transcurrir un tiempo aleatorio se desocupa y sigue el siguiente cliente en la fila. Para llevar a cabo este proceso se utilizo una ilustración gráfica elaborada en Qt, en primera instancia como se nombro anteriormente el programa pide una cantidad entera del número de cajeros habilitados en el banco; luego crea dos semaforos, uno para el acceso de los clientes a la memoria compartida y otra para la atención de los clientes, además se crea una memoria compartida para el proceso de asignación de turnos en la cola de espera. El proceso de entrada de entrada y salida de los clientes va siendo contabilizado en buffers. Para saber que cajero esta libre se realizo el uso de toquens, los cuales son asignados a usuario que va ocupando una caja y al acabar el proceso de atención lo libera, dejando que otro cliente lo tome y asi se realiza el proceso de forma consecutiva. Para la identificación del cliente, este llega con un nombre, identificación y un pid, el cúal es la base para saber cuando dejar de atender un cliente, pues con el pid se sabe el estado del proceso, entonces cuando el proceso hijo, en este caso, finalice; indica que el cliente se liberó, por lo tanto, el toquen vuelve a quedar libre; para la constante lectura del estado del proceso se utilizo un hilo. Con respecto a la gui, se realiza un hilo para la ejecución del proceso anteriormete mostrado, y se va mostrando cada una de las interacciones que realiza el usuario con el banco; por ejemplo para la lista de espera, en la parte derecha de la pantalla se muestra la lista de espera, está se muestra con los nombres de los clientes que estan esperando; en la parte inferior derecha, se muestra los clientes que ya fueron atendidos. Con respecto al proceso en el cual el cajero atiende al usuario, inicialmente se enseña un cajero sin nada, y al momento de interactuar el cajero con el usuario, se muestra un usuario y ensima del cajero el nombre de dicho usuario.
## Conclusiones
- La libreria pthread no es una libreria diseñada para la programación orientada a objetos, entonces en el instante en que se de implementar hilos en funciones dependientes de objetos, se obtinen problemas porque la libreria pide que la función sea estatica, generando que la interpretación de los objetos no sea la deseada. La solución seria la utilización de la libreria qtread, pero en la comunicación con la gui genera cirto problema; además para la elaboración de hilos se necesita crear una clase por cada hilo, lo que vuleve mas complejo el programa. Otra forma de solucionar este problema, es usar encapsulamiento, pero es un proceso demasiado complicado. Por ello, se opto a no usar objetos, sino todo se creo en un mismo programa; aunque incluso con esta solución se presento problema en algunas funciones, por ejemplo, para cerrar un hilo close era una función que tambien cerraba la ventana; por lo tanto, las funciones presentaban reinterpetración, por ello en algunos casos en especifico como este, fue necesario aplicar programación orientada a objeto.x
    
    
